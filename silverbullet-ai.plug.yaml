name: silverbullet-ai
requiredPermissions:
  - fetch
assets:
  - "assets/*"
functions:
  aiPromptSlashCommplete:
    path: src/prompts.ts:aiPromptSlashComplete
    events:
      - slash:complete
  queryAI:
    path: sbai.ts:queryAI
  chat:
    path: sbai.ts:chat

  tagNoteWithAI:
    path: sbai.ts:tagNoteWithAI
    command:
      name: "AI: Generate tags for note"
  promptAndGenerateImage:
    path: sbai.ts:promptAndGenerateImage
    command:
      name: "AI: Generate and insert image using DallE"
  streamChatOnPage:
    path: sbai.ts:streamChatOnPage
    command:
      name: "AI: Chat on current page"
      key: "Ctrl-Shift-Enter"
      mac: "Cmd-Shift-Enter"
  insertAiPromptFromTemplate:
    path: src/prompts.ts:insertAiPromptFromTemplate
    command:
      name: "AI: Execute AI Prompt from Custom Template"
  suggestPageName:
    path: sbai.ts:suggestPageName
    command:
      name: "AI: Suggest Page Name"
  enhanceNoteFrontMatter:
    path: sbai.ts:enhanceNoteFrontMatter
    command:
      name: "AI: Generate Note FrontMatter"
  enhanceNoteWithAI:
    path: sbai.ts:enhanceNoteWithAI
    command:
      name: "AI: Enhance Note"
  selectTextModel:
    path: sbai.ts:selectModelFromConfig
    command:
      name: "AI: Select Text Model from Config"
  selectImageModel:
    path: sbai.ts:selectImageModelFromConfig
    command:
      name: "AI: Select Image Model from Config"
  selectEmbeddingModel:
    path: sbai.ts:selectEmbeddingModelFromConfig
    command:
      name: "AI: Select Embedding Model from Config"
  testEmbeddingGeneration:
    path: sbai.ts:testEmbeddingGeneration
    command:
      name: "AI: Test Embedding Generation"
  getAllEmbeddings:
    path: src/embeddings.ts:getAllEmbeddings
  searchEmbeddings:
    path: src/embeddings.ts:searchEmbeddings
  queueEmbeddingGeneration:
    path: src/embeddings.ts:queueEmbeddingGeneration
    events:
      - page:index
  processEmbeddingsQueue:
    path: src/embeddings.ts:processEmbeddingsQueue
    mqSubscriptions:
      - queue: aiEmbeddingsQueue
        batchSize: 1
        autoAck: true
        pollInterval: 600000
  processSummaryQueue:
    path: src/embeddings.ts:processSummaryQueue
    mqSubscriptions:
      - queue: aiSummaryQueue
        batchSize: 1
        autoAck: true
        pollInterval: 600000
  generateEmbeddings:
    path: src/embeddings.ts:generateEmbeddings
  searchEmbeddingsForChat:
    path: src/embeddings.ts:searchEmbeddingsForChat
  searchCombinedEmbeddings:
    path: src/embeddings.ts:searchCombinedEmbeddings
  searchSummaryEmbeddings:
    path: src/embeddings.ts:searchSummaryEmbeddings
  getSearchResults:
    path: src/embeddings.ts:getSearchResults
  searchCommand:
    path: src/embeddings.ts:searchCommand
    command:
      name: "AI: Search"
  getConnectivityTestResults:
    path: src/connectivity.ts:getConnectivityTestResults
  connectivityTestCommand:
    path: src/connectivity.ts:connectivityTestCommand
    command:
      name: "AI: Connectivity Test"

  # AI Assistant Panel
  openAIAssistant:
    path: sbai.ts:openAIAssistant
    command:
      name: "AI: Open Assistant"
      key: "Ctrl-Shift-a"
      mac: "Cmd-Shift-a"
  closeAIAssistant:
    path: sbai.ts:closeAIAssistant
  toggleAIAssistant:
    path: sbai.ts:toggleAIAssistant
    command:
      name: "AI: Toggle Assistant Panel"
  startPanelChat:
    path: sbai.ts:startPanelChat
  getPanelChatChunk:
    path: sbai.ts:getPanelChatChunk
  submitToolApproval:
    path: sbai.ts:submitToolApproval
  requestWriteApproval:
    path: sbai.ts:requestWriteApproval
  submitWriteApproval:
    path: sbai.ts:submitWriteApproval
  getWriteDiff:
    path: sbai.ts:getWriteDiff
  renamePage:
    path: sbai.ts:renamePage
  postProcessToolCallHtml:
    path: sbai.ts:postProcessToolCallHtml
  renderToolCallWidget:
    path: sbai.ts:renderToolCallWidget
    codeWidget: toolcall
  exportPanelChat:
    path: sbai.ts:exportPanelChat
